@model IEnumerable<SouthAlive.Models.Product>

@{
    ViewData["Title"] = "Pantry Shop";
}
@section styles{

    <style>
        .ContactTitle {
            padding: 30px;
            color: white;
            background: #1d90d3;
            border-radius: 10px;
        }

        #Contact_IMG {
            margin: 0;
            padding: 0;
        }

        .productImg {
            padding:5px;
        }
        .ProductContentBox {
            padding:10px;
        }

    </style>

}


<div class="row">
    <ol class="breadcrumb transparent">
        <li class="breadcrumb-item"><a href="~/"><i class="fa fa-home" aria-hidden="true"></i></a></li>
        <li class="breadcrumb-item active">Shop</li>
    </ol>
</div>

<div class="col-lg-12">
    <h3 class="text-center ContactTitle z-depth-1"><b>Pantry Shop</b></h3><br />
    @if (User.Identity.Name == "imseyoun@gmail.com")
    {
        <p>
            <a asp-action="Create">Add Product</a>
        </p>
    }


    <div class="row">
        <div class="col-xs-8">
            <select class="form-control CategoryOption">
                <option value="">Choose Category</option>
                <option value="All">All</option>
                <option value="a">a</option>
                <option value="b">b</option>
                <option value="c">c</option>
            </select>
          </div>
        <div class="col-xs-4">
            <a class="btn btn-primary btnCat">Click</a>

            <!-- Button trigger modal -->
            <a class="btn btn-primary" data-toggle="modal" data-target="#myModal">
                <i class="fa fa-shopping-cart" aria-hidden="true"></i>&nbsp;&nbsp;Cart<span class="CartIcon"></span>
            </a>

        </div>
    </div>

    <div class="row" style="padding:5px;">
        @foreach (var item in Model)
        {
            <div class="col-lg-3 col-md-4 col-sm-6 product @Html.DisplayFor(modelItem => item.ProductCategory)">
                <div class="white z-depth-1">
                    <div style="padding:3px;">
                        <a href="/Products/Details/@item.ProductId"><img class="img-fluid productImg" src="@item.ProductImgUrl" style="width:100%;max-height:150px" /></a>
                    </div>
                    <div class="ProductContentBox">
                        <p>Category : @Html.DisplayFor(modelItem => item.ProductCategory)</p>
                        <a href="/Products/Details/@item.ProductId"><h3 class="text-center">@Html.DisplayFor(modelItem => item.ProductName)</h3></a>
                        <span>NZ$ </span><span class="price-@item.ProductId">@Html.DisplayFor(modelItem => item.ProductPrice)</span>
                        <a class="pull-right AddCart" data-toggle="tooltip" data-placement="top" title="Add to Cart"><i class="fa fa-shopping-cart"></i></a>
                        <div class="hiddendiv">@item.ProductId, @item.ProductName, @item.ProductPrice, @item.ProductImgUrl</div>
                                
                    </div>
                    
                </div>
            </div>
        }
    </div>




    <!-- Modal -->
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog" role="document">
            <!--Content-->
            <div class="modal-content">
                <!--Header-->
                <div class="modal-header">
                    <h4 class="modal-title w-100" id="myModalLabel">Shopping List</h4>
                </div>
                <!--Body-->
                <div class="modal-body">
                    
                </div>
                <!--Footer-->
                <div class="modal-footer">
                    <button type="button" class="btn btn-primary" data-dismiss="modal">Close</button>
                    <button type="button" class="btn btn-primary">Pay</button>
                </div>
            </div>
            <!--/.Content-->
        </div>
    </div>
    <!-- /.Live preview-->

    <div class="label"></div>

</div>


@section scripts {
    <script>
        var Cart = new Array();
        var Product = '';
        var CartListCount = 0;
        $(document).ready(function () {

            $('.btnCat').click(function () {
                $abc = $('.CategoryOption').val();
                if ($abc === 'All') {
                    $('.product').show(200);
                } else {
                    $('.product').hide(200);
                    $('.' + $abc).show(200);
                }

            });


            $('.AddCart').click(function () {
                CartListCount += 1;
                $('.CartIcon').empty();
                $('.CartIcon').append(' ' + CartListCount);

                $bb = $(this).parent().find('div').text();
                var bbArray = $bb.split(",");

                
                $('.modal-body').append('ID: ' + bbArray[0]);
                $('.modal-body').append(', Name: ' + bbArray[1]);
                $('.modal-body').append(', Price: ' + bbArray[2] + '<br />');
            });

            $('#myModal').on('shown.bs.modal', function () {
                $('#myInput').focus()
            });


        });



    </script>
}